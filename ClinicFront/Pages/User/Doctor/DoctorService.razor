@page "/doctorservice"
@using ClinicModels.DTOs.DoctorServiceDTO;
@layout MainLayoutDoctor
<div class="container-lg" style="margin-top: -1.1rem; width: 70%;position: relative;right: 6%;">
    <div class="containerofcntent">
        <div class="row" style="padding-right: 2rem;">
            <h1><b>الخدمات اللتى نقدمها</b></h1>
            @for(var i = 0; i < 7; i++)
            {
                <div class="card-container col-lg-4 col-md-6 col-sm-6">
                    <div class="card">
                        <div class="image">
                            @if (string.IsNullOrEmpty(Image))
                            {
                                <i class="bi bi-image" style="color:#03206C;font-size: 1000%;"></i>
                            }
                            else
                            {
                                <img src="@Image" />
                            }
                        </div>
                        <div class="content">
                            <div class="header">Orthodontics.</div>
                            <div class="description">
                                Lorem ipsum, dolor sit amet consectetur adipisicing elit. Corporis maiores expedita exercitationem rerum, voluptate laudantium nostrum ratione aliquam adipisci, vitae soluta repellat cupiditate, inventore ipsa distinctio quidem assumenda voluptates eligendi.
                            </div>
                            <div style="display:flex">
                                <button type="submit" class="btn btn-lg btn-block fw-bold button" style="padding: .2rem 0rem;width:40%">
                                    حذف
                                </button>
                                <button type="submit" class="btn btn-lg btn-block fw-bold button" style="padding: .2rem 0rem;width:40%">
                                    تعديل
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            }
             

        </div>

        <div class="subcontainerofcntent">
            <h3>إضافة خدمة جديدة</h3>
            <div class="flexrow row">
                <div class="col-lg-5 col-md-12">
                    <div style="margin-bottom: 2rem;">
                        <label for="adderss"><b>العنوان:</b></label>
                        <InputText id="adderss" @bind-Value="@Adderss" style="padding-right:3rem;"
                                   class="form-control input_i ss" placeholder="اكتب العنوان" />
                    </div> 
                    <div>
                        <label for="discription"><b>الوصف:</b></label>
                        <InputText @bind-Value="@Discription" id="discription"
                                   style="padding-right:3rem;" class="form-control input_i ss" placeholder="اكتب العنوان" />
                    </div>

                </div>
                <div class="col-lg-5 col-md-12">
                    <InputFile id="image" type="file" OnChange="@UploadImage" style="display:none;" />
                    <div class="divOfUploadserviceImage">
                        @if(string.IsNullOrEmpty(Image)){
                            <label for="image">
                                <i class="bi bi-image" style="color:#03206C;font-size:500%"></i>
                            </label>
                        }else{
                            <img src="@Image"/>
                        }
                    </div>
                    <label for="image">
                        <button type="submit" class="btn btn-lg btn-block fw-bold button" style="padding: .2rem 0rem;">
                            إضغط لتحميل صورة
                        </button>
                    </label>
                </div>
            </div>
            <div>
                <button type="submit" class="btn btn-lg btn-block fw-bold button AddButton" style="padding: .2rem 0rem;">
                    إضافة
                </button>
            </div>
        </div>
    </div>
</div>

@code {


    public List<DoctorServiceDTO> doctorServiceDTOs { get; set; } = new List<DoctorServiceDTO>();
    public string Image { get; set; }
    public string Adderss { get; set; }
    public string Discription { get; set; }

    private async void UploadImage(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null)
        {
            var format = "image/png";
            var resizedImageFile = await file.RequestImageFileAsync(format, 400, 400);

            using var ms = new MemoryStream();
            await resizedImageFile.OpenReadStream().CopyToAsync(ms);
            var buffer = ms.ToArray();

            var imageDataUrl = $"data:{format};base64,{Convert.ToBase64String(buffer)}";
           
            Image = imageDataUrl;
        }
    }
}
